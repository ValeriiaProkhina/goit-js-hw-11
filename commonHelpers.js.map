{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryRef = document.querySelector('.gallery');\nconst spanLoader = document.querySelector('.span-loader');\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41747369-46a857856bf510ac3748d6666';\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  galleryRef.innerHTML = '';\n\n  spanLoader.classList.add('loader');\n  const query = event.currentTarget.elements.query.value;\n\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  renderImages(searchParams);\n  searchForm.reset();\n});\n\nconst getImages = searchParams => {\n  return fetch(`${BASE_URL}?${searchParams}`).then(response => {\n    if (response.ok) {\n      return response.json();\n    } else {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n  });\n};\n\nconst getImagesHTML = images =>\n  images.hits.reduce(\n    (html, img) =>\n      html +\n      `<li class=\"img-item\">\n      <div class=\"img\">\n  <a class=\"img-link\" href=\"${img.largeImageURL}\">\n    <img\n      class=\"images\"\n      src=\"${img.webformatURL}\"\n      data-source=\"${img.largeImageURL}\"\n      alt=\"${img.tags}\"\n      width=\"360\"\n      height=\"200\"\n  /></a></div>\n<div class=\"description\">\n  <div class=\"category\">\n    <p><b>Likes</b></p>\n    <p>${img.likes}</p>\n  </div>\n  <div>\n    <p><b>Views</b></p>\n    <p>${img.views}</p>\n  </div>\n  <div>\n    <p><b>Comments</b></p>\n    <p>${img.comments}</p>\n  </div>\n  <div>\n    <p><b>Downloads</b></p>\n    <p>${img.downloads}</p>\n  </div>\n</div>\n</li>`,\n    ''\n  );\n\nfunction renderImages(searchParams) {\n  getImages(searchParams)\n    .then(images => {\n      if (images.hits.length === 0)\n        throw new Error(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        close: true,\n      });\n      galleryRef.insertAdjacentHTML('afterbegin', getImagesHTML(images));\n      lightbox.refresh();\n    })\n    .catch(error =>\n      iziToast.error({\n        message: error.message,\n        position: 'topRight',\n      })\n    )\n    .finally(() => {\n      spanLoader.classList.remove('loader');\n    });\n}\n"],"names":["searchForm","galleryRef","spanLoader","BASE_URL","API_KEY","event","query","searchParams","renderImages","getImages","response","getImagesHTML","images","html","img","lightbox","SimpleLightbox","error","iziToast"],"mappings":"6vBAKA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAW,2BACXC,EAAU,qCAEhBJ,EAAW,iBAAiB,SAAUK,GAAS,CAC7CA,EAAM,eAAc,EACpBJ,EAAW,UAAY,GAEvBC,EAAW,UAAU,IAAI,QAAQ,EACjC,MAAMI,EAAQD,EAAM,cAAc,SAAS,MAAM,MAE3CE,EAAe,IAAI,gBAAgB,CACvC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EACDE,EAAaD,CAAY,EACzBP,EAAW,MAAK,CAClB,CAAC,EAED,MAAMS,EAAYF,GACT,MAAM,GAAGJ,KAAYI,GAAc,EAAE,KAAKG,GAAY,CAC3D,GAAIA,EAAS,GACX,OAAOA,EAAS,OAEhB,MAAM,IAAI,MACR,0EACR,CAEA,CAAG,EAGGC,EAAgBC,GACpBA,EAAO,KAAK,OACV,CAACC,EAAMC,IACLD,EACA;AAAA;AAAA,8BAEwBC,EAAI;AAAA;AAAA;AAAA,aAGrBA,EAAI;AAAA,qBACIA,EAAI;AAAA,aACZA,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAORA,EAAI;AAAA;AAAA;AAAA;AAAA,SAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,SAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,SAIJA,EAAI;AAAA;AAAA;AAAA,OAIT,EACJ,EAEA,SAASN,EAAaD,EAAc,CAClCE,EAAUF,CAAY,EACnB,KAAKK,GAAU,CACd,GAAIA,EAAO,KAAK,SAAW,EACzB,MAAM,IAAI,MACR,0EACV,EACM,MAAMG,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,MAAO,EACf,CAAO,EACDf,EAAW,mBAAmB,aAAcU,EAAcC,CAAM,CAAC,EACjEG,EAAS,QAAO,CACtB,CAAK,EACA,MAAME,GACLC,EAAS,MAAM,CACb,QAASD,EAAM,QACf,SAAU,UAClB,CAAO,CACF,EACA,QAAQ,IAAM,CACbf,EAAW,UAAU,OAAO,QAAQ,CAC1C,CAAK,CACL"}